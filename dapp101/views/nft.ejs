<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>NFT sales tutorial</title>

    <!-- Font Awesome icons (free version)-->
    <script
      src="https://use.fontawesome.com/releases/v6.1.0/js/all.js"
      crossorigin="anonymous"
    ></script>
    <!-- Simple line icons-->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css"
      rel="stylesheet"
    />
    <!-- Google fonts-->
    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="stylesheets/styles.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.3.min.js"
      integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU="
      crossorigin="anonymous"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js"
    ></script>
  </head>
  <body>
    <!-- <div class="container-fluid justify-content-md-center">
      <div class="row"> -->

    <div class="container">
      <div class="m-0 row justify-content-md-center">
        <div class="col-sm-6 col-md-4">
          <img
            class="mt-3 img-fluid"
            id="nft-image"
            alt="nft이미지 원하는거 넣으시면 됩니다"
          />
          <div class="col-md-12">
            <div class="mt-1 accordion-item">
              <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                <button
                  class="accordion-button"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseOne"
                  aria-expanded="true"
                  aria-controls="panelsStayOpen-collapseOne"
                >
                  Description
                </button>
              </h2>
              <div
                id="panelsStayOpen-collapseOne"
                class="accordion-collapse collapse show"
                aria-labelledby="panelsStayOpen-headingOne"
              >
                <div class="accordion-body" id="attributes_accordion"></div>
              </div>
            </div>
          </div>
        </div>
        <div class="mt-0 col-sm-6 col-md-4">
          <p class="mt-3 mb-0 fs-4">NFT</p>
          <div class="row">
            <div class="col-md-12">
              <p class="fs-1 fw-bolder" id="token_name"></p>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <!-- <p class="fs-5">Owned by</p> -->
              <span>Owned by</span>
              <span class="text-primary">Moondda</span>
            </div>
            <div class="col-md-6">
              <span><i class="bi bi-eye-fill"></i> 723 Views</span>
            </div>
            <!-- <div class="col-md-6"></div> -->
          </div>
          <div class="mt-3 row">
            <div class="mb-3 col-md-12">
              <p class="fs-4 fw-bold col-md-6">Current Price is...</p>

              <h2><i class="bi bi-diamond-half"> 20000</i></h2>
            </div>
          </div>

          <button type="button" class="m-1 btn btn-secondary btn-lg">
            BUY NOW !!!
          </button>
         
          <button
          type="button"
          class="m-1 btn btn-primary btn-lg"
          id="getInfo"
        >
          NEXT ITEM
        </button>
    
          <div class="row">
            <div class="col-7">
              <form id="token-form">
              <div class="form-group row m-1">
                <div class="col-9 p-0">
                  <input type="text" class="form-control" id="token-id" name="tokenId" placeholder="Enter other NFT ID">
                </div>
                <div class="col-3 pl-1">
                  <button type="submit" class="btn btn-primary "><i class="bi bi-search"></i></button>
                </div>
              </div>
            </form>
            </div>
          </div>
       
      </div>
      <div class="m-0 row" style>
        <!-- <div class="col-md-4" style="text-align: center"> -->

        <div class="col-md-6"></div>
      </div>
    </div>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <!-- <script src="javascripts/scripts.js"></script> -->
    <!-- <script src="javascripts/crypto.js"></script> -->
    <!-- <script src=https://raw.githubusercontent.com/dogeum-network/nft-baseuri/main/metadatas/0> id="tokenData" </script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> -->
    <script>
      function getTokenMetaData(tokenId) {
        $.ajax({
          type: "get",
          url: "nft/nft_metadata",
          data: {
            tokenId: tokenId,
          },
          dataType: "json",
        }).done(function (json) {
          console.log("json success", json);
          $("#nft-image").attr("src", json.image);
          $("#token_name").text(json.name);
          $("#attributes_accordion").empty();
          for (let i = 0; i < json.attributes.length; i++) {
            console.log(json.attributes[i].trait_type);
            console.log(json.attributes[i].value);
            $("#attributes_accordion").append(
              `<p id="attributes"> ${json.attributes[i].trait_type}  :  ${json.attributes[i].value} </p>`
            );
          }
        });
      }
      let tokenId = $("#token-id").val() || 1;
      $(document).ready(async function () {
   
    getTokenMetaData(tokenId);
        $("#getInfo").click(async function (event) {
          event.preventDefault();
          getTokenMetaData(++tokenId);
        });
      });


$(document).on("submit", "#token-form", function (event) {
  event.preventDefault();
  tokenId = $("#token-id").val();
  getTokenMetaData(tokenId);
});



    </script>
  </body>
</html>